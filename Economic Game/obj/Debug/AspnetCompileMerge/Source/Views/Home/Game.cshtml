@model Economic_Game.Models.RoundViewModel
@{
}

@*<h2>Round1</h2>

    <h3>Starting Amount: @Model.StartingAmount.ToString()</h3>*@

<script src="~/Scripts/jquery-1.12.4.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-ui-1.12.0.js" type="text/javascript"></script>


@*@if (ViewBag.GameMessage != null)
{
    <script>

        $(document).ready(function(){

            setTimeout(function () {
                alert('@ViewBag.GameMessage');
            },
                6000);

            setTimeout(function () {
                $('#currentEarnings').fadeIn(500);
            },
    6000);
});

    </script>
}
else
{
    <script>
        $(document).ready(function () {
            $('#currentEarnings').show();
        });
    </script>
}*@

@if(ViewBag.Error == null)
    { 
    <script>
        $(document).ready(function () {

        //setTimeout(function () {
        //    $('#gameMessage').show(500);
        //}, 7000);

        setTimeout(function () {
            $('#sellerTyping').fadeIn(500);
        }, 7000);

        setTimeout(function () {
            $('#sellerTyping').hide(300);
        }, 13000);

        setTimeout(function () {
            $('#sellerMessage1').show(200);
        }, 13400);

        setTimeout(function () {
            $('#sellerTyping').fadeIn(500);
        }, 18000);

        setTimeout(function () {
            $('#sellerTyping').hide();
        }, 23000);

        setTimeout(function () {
            $('#sellerMessage2').show(200);
        }, 23500);

        setTimeout(function () {
            $('#sellerTyping').fadeIn(500);
        }, 28000);

        setTimeout(function () {
            $('#sellerTyping').hide(300);
        }, 33000);

        setTimeout(function () {
            $('#sellerMessage3').show(200);
        }, 33400);
    
        //$(document).on('submit', 'form.remember', function () {
        //    setTimeout(function () {
        //        $('#sellerDecidingMessage').show(200);
        //    }, 2000);

        //    setTimeout(function () {
        //        $('#sellerDecidingMessage').hide(200);
        //    }, 7000);
        //});

        $(".toggleFAQ").click(function () {
            $('#FAQtable').toggle();
            $('.FAQ').toggle(500);
        });
    });
    </script>
}


@using (Html.BeginForm())
{
    @Html.HiddenFor(Model => Model.GameID)
    @Html.HiddenFor(Model => Model.ReturnPercentage)
    @Html.HiddenFor(Model => Model.CurrentRound)
    <table>
        <tr>
            <td style="width:80%;">
                <table class="table table-bordered game-table">
                    <tr>
                        <th colspan="3">
                            
                                @if (Model.CurrentRound < 5)
                                {
                                    <h1>
                                        ROUND <span style="font-weight: bold;">@Model.CurrentRound</span>
                                    </h1>
                                }
                                else
                                {
                                    <h1>
                                        ROUND <span style="font-weight: bold;">4</span>
                                    </h1>
                                }
                                    
                            <div>
                                <button type="button" class="btn btn-default btn-sm toggleFAQ"><span class="glyphicon glyphicon-question-sign" onclick="toggleFAQ()"></span>&nbsp;&nbsp;View/Hide FAQ</button>
                            </div>
                            @*@if (Model.RoundType == "Practice Round")
                {
                                <h4 style="color: red;">
                                    @Model.RoundType.ToUpper()
                                </h4>
                            }
                            else
                            {
                                <h4>
                                    @Model.RoundType
                                </h4>
                            }*@
                        </th>
                    </tr>
                    <tr>
                        <td colspan="3" style="text-align: center;">
                            @if(Model.RoundReturned != null)
                            {
                                <span style="font-size: larger; color: green;">Seller has decided to return @Model.RoundReturned.Value.ToString("C")</span>
                            }
                            <label id="gameStatusMessage">@Model.GameMessage</label>
                            <label id="sellerDecidingMessage">Seller is Deciding...</label>
                        </td>
                    </tr>
                    <tr>
                        <th width="33%">
                            <h4 class="form-inline text-center">
                                <strong>MONEY TO INVEST: </strong>&nbsp;
                                <span style="font-size: xx-large; font-weight: bold;">@Html.DisplayFor(Model => Model.StartingAmount)</span>@*@Model.PlayerTotal.ToString()*@
                                @Html.HiddenFor(Model => Model.StartingAmount)
                            </h4>
                        </th>
                        <th width="33%">
                            <h4 class="form-inline text-center">
                                <strong>CURRENT EARNINGS: &nbsp;</strong>
                                <span style="font-size: xx-large; font-weight: bold;">
                                    @if (Model.PlayerTotal != null)
                                    {
                                    @Model.PlayerTotal.Value.ToString("C")
                                    }
                                </span>
                                @Html.HiddenFor(Model => Model.CurrentEarnings)
                            </h4>
                        </th>
                        <th>
                            <h4 class="form-inline text-center">
                                <strong>ROUND MULTIPLIER: </strong> X
                                <span style="font-size: xx-large; font-weight: bold;">
                                    @Html.DisplayFor(Model => Model.Multiplier)
                                </span>
                                @Html.HiddenFor(Model => Model.Multiplier)
                            </h4>
                        </th>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <p class="lead" style="width: 90%; margin: 0 auto;">
                                You are the buyer.<br /><br />
                                You have @Model.StartingAmount.Value.ToString("C") to invest.&nbsp;&nbsp;
                                You can choose to either keep the @Model.StartingAmount.Value.ToString("C") or invest part or none of it.&nbsp;&nbsp;
                                Whatever amount of money you choose to invest (up to @Model.StartingAmount.Value.ToString("C")) will be multiplied by @Model.MultiplierText.&nbsp;&nbsp;
                                The seller can choose to keep any amount up to&nbsp;
                                @{
                                    decimal potential = (decimal)Model.StartingAmount * (decimal)Model.Multiplier;
                                }
                                @potential.ToString("C") or share part or all of the profit back with you.<br /><br />

                                Please enter how much you would like to invest and how much you would like to keep.&nbsp;&nbsp;
                                <span style="font-size: large;">Remember the total cannot exceed @Model.StartingAmount.Value.ToString("C")</span>

                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" style="height: 100px;">
                            <table class="table" style="height: 100%; width:90%; margin: 0 auto;">
                                <tr>

                                    <td style="width: 30%; border-top: none;">
                                        <h4 style="float: right;"><strong>SELLER MESSAGE:</strong></h4><br />
                                        @if (ViewBag.EndGame == null)
                                        {
                                        <div style="float: right;" id="sellerTyping">Seller is typing...</div>
                                        }
                                    </td>
                                    <td style="width: 70%; border-top: none;">
                                        @if (ViewBag.EndGame == null)
                                        {
                                        <div style="text-align: left;">
                                                <div id="sellerMessage1">@Model.Message1<br /></div>
                                                <div id="sellerMessage2">@Model.Message2<br /></div>
                                                <div id="sellerMessage3">@Model.Message3<br /></div>
                                        </div>
                                        }
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <table class="table" style="width: 90%; margin: 0 auto; border: none;">
                                <tr>
                                    <td style="border-top: none;">
                                        <h5><strong>ENTER HOW MUCH YOU WOULD LIKE TO INVEST: </strong></h5>&nbsp;&nbsp;
                                    </td>
                                    <td style="border-top: none; width: 20%;">
                                        @*@Html.TextBoxFor(Model => Model.RoundInvestment, new { @class = "form-control small" })*@
                                        <div class="form-inline">
                                            <span style="font-size: x-large; font-weight: bold;">$</span>@Html.TextBoxFor(Model => Model.RoundInvestmentDollars, new { @class = "form-control smallest", @maxlength = "1" })
                                            <span style="font-size: x-large; font-weight: bold;">.</span>@Html.TextBoxFor(Model => Model.RoundInvestmentCents, new { @class = "form-control smaller", @maxlength = "2" })
                                        </div>
                                    </td>

                                    <td style="border-top: none;">
                                        <h5><strong>ENTER HOW MUCH YOU WOULD LIKE TO KEEP: </strong></h5>&nbsp;&nbsp;
                                    </td>
                                    <td style="border-top: none; width: 20%;">
                                        @*@Html.TextBoxFor(Model => Model.RoundKept, new { @class = "form-control small" })*@
                                        <div class="form-inline">
                                            <span style="font-size: x-large; font-weight: bold;">$</span>@Html.TextBoxFor(Model => Model.RoundKeptDollars, new { @class = "form-control smallest", @maxlength = "1" })
                                            <span style="font-size: x-large; font-weight: bold;">.</span>@Html.TextBoxFor(Model => Model.RoundKeptCents, new { @class = "form-control smaller", @maxlength = "2" })
                                        </div>
                                    </td>
                                </tr>
                                @if (ViewBag.Error != null)
                                {
                                    <tr>
                                        <td colspan="4" style="text-align: center;">
                                            <label class="text-danger">@ViewBag.Error</label>
                                        </td>
                                    </tr>
                                }
                            </table>
                        </td>
                    </tr>
                    @if (ViewBag.EndGame == null)
                    {
                        <tr>
                            <td colspan="3">
                                <p class="text-center">
                                    <button type="submit" class="btn btn-default btn-success">Submit&nbsp;&nbsp;<span class="glyphicon glyphicon-ok"></span></button>
                                </p>
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td colspan="3">
                                <p class="text-center">
                                    <a href="/Home/Summary?id=@Model.GameID" class="btn btn-default btn-success"><span class="glyphicon glyphicon-align-justify"></span>&nbsp;&nbsp;View Game Summary</a>
                                </p>
                            </td>
                        </tr>
                    }
                </table>
            </td>
            <td class="FAQ" style="vertical-align: top;">
                <table class="table faq-table">
                    <tr>
                        <th>
                            <h3>Frequently Asked Questions</h3>
                        </th>
                    </tr>
                    @if (ViewData["Questions"] != null)
                    {
                    foreach (Economic_Game.Models.Question question in (List<Economic_Game.Models.Question>)ViewData["Questions"])
                    {
                        <tr>
                            <th>
                                <strong>Q: @question.QuestionText</strong>
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <strong>A: </strong>@question.AnswerText
                            </td>
                        </tr>
                    }
                    }
                </table>
            </td>
        </tr>
    </table>
    

    
                        }